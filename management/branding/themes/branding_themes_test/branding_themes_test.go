// Code generated by Fern. DO NOT EDIT.

package branding_themes_test

import (
	bytes "bytes"
	context "context"
	json "encoding/json"
	management "github.com/auth0/go-auth0/v2/management"
	client "github.com/auth0/go-auth0/v2/management/client"
	option "github.com/auth0/go-auth0/v2/management/option"
	require "github.com/stretchr/testify/require"
	http "net/http"
	testing "testing"
)

func ResetWireMockRequests(
	t *testing.T,
) {
	WiremockAdminURL := "http://localhost:8080/__admin"
	_, err := http.Post(WiremockAdminURL+"/requests/reset", "application/json", nil)
	require.NoError(t, err)
}

func VerifyRequestCount(
	t *testing.T,
	method string,
	urlPath string,
	queryParams map[string]string,
	expected int,
) {
	WiremockAdminURL := "http://localhost:8080/__admin"
	var reqBody bytes.Buffer
	reqBody.WriteString(`{"method":"`)
	reqBody.WriteString(method)
	reqBody.WriteString(`","urlPath":"`)
	reqBody.WriteString(urlPath)
	reqBody.WriteString(`"}`)
	if len(queryParams) > 0 {
		reqBody.WriteString(`,"queryParameters":{`)
		first := true
		for key, value := range queryParams {
			if !first {
				reqBody.WriteString(",")
			}
			reqBody.WriteString(`"`)
			reqBody.WriteString(key)
			reqBody.WriteString(`":{"equalTo":"`)
			reqBody.WriteString(value)
			reqBody.WriteString(`"}`)
			first = false
		}
		reqBody.WriteString("}")
	}
	resp, err := http.Post(WiremockAdminURL+"/requests/find", "application/json", &reqBody)
	require.NoError(t, err)
	var result struct {
		Requests []interface{} `json:"requests"`
	}
	json.NewDecoder(resp.Body).Decode(&result)
	require.Equal(t, expected, len(result.Requests))
}

func TestBrandingThemesCreateWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewWithOptions(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &management.CreateBrandingThemeRequestContent{
		Borders: &management.BrandingThemeBorders{
			ButtonBorderRadius: 1.1,
			ButtonBorderWeight: 1.1,
			ButtonsStyle:       management.BrandingThemeBordersButtonsStyleEnumPill,
			InputBorderRadius:  1.1,
			InputBorderWeight:  1.1,
			InputsStyle:        management.BrandingThemeBordersInputsStyleEnumPill,
			ShowWidgetShadow:   true,
			WidgetBorderWeight: 1.1,
			WidgetCornerRadius: 1.1,
		},
		Colors: &management.BrandingThemeColors{
			BodyText:                "body_text",
			Error:                   "error",
			Header:                  "header",
			Icons:                   "icons",
			InputBackground:         "input_background",
			InputBorder:             "input_border",
			InputFilledText:         "input_filled_text",
			InputLabelsPlaceholders: "input_labels_placeholders",
			LinksFocusedComponents:  "links_focused_components",
			PrimaryButton:           "primary_button",
			PrimaryButtonLabel:      "primary_button_label",
			SecondaryButtonBorder:   "secondary_button_border",
			SecondaryButtonLabel:    "secondary_button_label",
			Success:                 "success",
			WidgetBackground:        "widget_background",
			WidgetBorder:            "widget_border",
		},
		Fonts: &management.BrandingThemeFonts{
			BodyText: &management.BrandingThemeFontBodyText{
				Bold: true,
				Size: 1.1,
			},
			ButtonsText: &management.BrandingThemeFontButtonsText{
				Bold: true,
				Size: 1.1,
			},
			FontURL: "font_url",
			InputLabels: &management.BrandingThemeFontInputLabels{
				Bold: true,
				Size: 1.1,
			},
			Links: &management.BrandingThemeFontLinks{
				Bold: true,
				Size: 1.1,
			},
			LinksStyle:        management.BrandingThemeFontLinksStyleEnumNormal,
			ReferenceTextSize: 1.1,
			Subtitle: &management.BrandingThemeFontSubtitle{
				Bold: true,
				Size: 1.1,
			},
			Title: &management.BrandingThemeFontTitle{
				Bold: true,
				Size: 1.1,
			},
		},
		PageBackground: &management.BrandingThemePageBackground{
			BackgroundColor:    "background_color",
			BackgroundImageURL: "background_image_url",
			PageLayout:         management.BrandingThemePageBackgroundPageLayoutEnumCenter,
		},
		Widget: &management.BrandingThemeWidget{
			HeaderTextAlignment: management.BrandingThemeWidgetHeaderTextAlignmentEnumCenter,
			LogoHeight:          1.1,
			LogoPosition:        management.BrandingThemeWidgetLogoPositionEnumCenter,
			LogoURL:             "logo_url",
			SocialButtonsLayout: management.BrandingThemeWidgetSocialButtonsLayoutEnumBottom,
		},
	}
	_, invocationErr := client.Branding.Themes.Create(
		context.TODO(),
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "POST", "/branding/themes", nil, 1)
}

func TestBrandingThemesGetDefaultWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewWithOptions(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	_, invocationErr := client.Branding.Themes.GetDefault(
		context.TODO(),
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "GET", "/branding/themes/default", nil, 1)
}

func TestBrandingThemesGetWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewWithOptions(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	_, invocationErr := client.Branding.Themes.Get(
		context.TODO(),
		"themeId",
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "GET", "/branding/themes/themeId", nil, 1)
}

func TestBrandingThemesDeleteWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewWithOptions(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	invocationErr := client.Branding.Themes.Delete(
		context.TODO(),
		"themeId",
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "DELETE", "/branding/themes/themeId", nil, 1)
}

func TestBrandingThemesUpdateWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewWithOptions(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &management.UpdateBrandingThemeRequestContent{
		Borders: &management.BrandingThemeBorders{
			ButtonBorderRadius: 1.1,
			ButtonBorderWeight: 1.1,
			ButtonsStyle:       management.BrandingThemeBordersButtonsStyleEnumPill,
			InputBorderRadius:  1.1,
			InputBorderWeight:  1.1,
			InputsStyle:        management.BrandingThemeBordersInputsStyleEnumPill,
			ShowWidgetShadow:   true,
			WidgetBorderWeight: 1.1,
			WidgetCornerRadius: 1.1,
		},
		Colors: &management.BrandingThemeColors{
			BodyText:                "body_text",
			Error:                   "error",
			Header:                  "header",
			Icons:                   "icons",
			InputBackground:         "input_background",
			InputBorder:             "input_border",
			InputFilledText:         "input_filled_text",
			InputLabelsPlaceholders: "input_labels_placeholders",
			LinksFocusedComponents:  "links_focused_components",
			PrimaryButton:           "primary_button",
			PrimaryButtonLabel:      "primary_button_label",
			SecondaryButtonBorder:   "secondary_button_border",
			SecondaryButtonLabel:    "secondary_button_label",
			Success:                 "success",
			WidgetBackground:        "widget_background",
			WidgetBorder:            "widget_border",
		},
		Fonts: &management.BrandingThemeFonts{
			BodyText: &management.BrandingThemeFontBodyText{
				Bold: true,
				Size: 1.1,
			},
			ButtonsText: &management.BrandingThemeFontButtonsText{
				Bold: true,
				Size: 1.1,
			},
			FontURL: "font_url",
			InputLabels: &management.BrandingThemeFontInputLabels{
				Bold: true,
				Size: 1.1,
			},
			Links: &management.BrandingThemeFontLinks{
				Bold: true,
				Size: 1.1,
			},
			LinksStyle:        management.BrandingThemeFontLinksStyleEnumNormal,
			ReferenceTextSize: 1.1,
			Subtitle: &management.BrandingThemeFontSubtitle{
				Bold: true,
				Size: 1.1,
			},
			Title: &management.BrandingThemeFontTitle{
				Bold: true,
				Size: 1.1,
			},
		},
		PageBackground: &management.BrandingThemePageBackground{
			BackgroundColor:    "background_color",
			BackgroundImageURL: "background_image_url",
			PageLayout:         management.BrandingThemePageBackgroundPageLayoutEnumCenter,
		},
		Widget: &management.BrandingThemeWidget{
			HeaderTextAlignment: management.BrandingThemeWidgetHeaderTextAlignmentEnumCenter,
			LogoHeight:          1.1,
			LogoPosition:        management.BrandingThemeWidgetLogoPositionEnumCenter,
			LogoURL:             "logo_url",
			SocialButtonsLayout: management.BrandingThemeWidgetSocialButtonsLayoutEnumBottom,
		},
	}
	_, invocationErr := client.Branding.Themes.Update(
		context.TODO(),
		"themeId",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "PATCH", "/branding/themes/themeId", nil, 1)
}
